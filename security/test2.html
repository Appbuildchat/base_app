<!DOCTYPE html>
<html>
<head>
  <title>Firebase Security Test</title>
</head>
<body>
  <h1>Testing Full Database Read Access</h1>
  <p>Check the browser's developer console (press F12) to see the result.</p>

  <script type="module">
    // Import necessary functions
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    // Your web configuration
    const firebaseConfig = {
      apiKey: 'AIzaSyB6xZ14ClFl4LhHtI6PAU_nsV0ZRLTw-8o',
      appId: '1:1093996912048:web:882a8e0ace1869f6484a75',
      messagingSenderId: '1093996912048',
      projectId: 'red-alix-albi--abc',
      authDomain: 'red-alix-albi--abc.firebaseapp.com',
      storageBucket: 'red-alix-albi--abc.firebasestorage.app',
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // --- Function to read all documents from a GUESSED collection name ---
    async function readArbitraryCollection(collectionName) {
      console.log(`Attempting to read all documents from collection: '${collectionName}'...`);
      try {
        const collectionRef = collection(db, collectionName);
        const querySnapshot = await getDocs(collectionRef);
        
        if (querySnapshot.empty) {
          console.warn(`‚ö†Ô∏è Query was successful, but the '${collectionName}' collection either doesn't exist or is empty.`);
        } else {
          console.log(`üî• SECURITY ALERT: Successfully read ${querySnapshot.size} documents from the '${collectionName}' collection.`);
          querySnapshot.forEach((doc) => {
            console.log(`Document ID: ${doc.id}`, doc.data());
          });
        }
      } catch (error) {
        console.error(`‚ùå FAILED to read from '${collectionName}':`, error.message);
      }
    }

    // --- Run the test on a commonly named collection ---
    // Change 'users' to any collection name you want to test
    const collectionNameToRead = 'users'; 
    await readArbitraryCollection(collectionNameToRead);

  </script>
</body>
</html>